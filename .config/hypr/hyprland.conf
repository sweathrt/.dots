# █▀▀ ▀▄▀ █▀▀ █▀▀
# ██▄ █░█ ██▄ █▄▄
#exec-once = wl-clipboard-history -t
exec-once = autostart
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = xprop -root -f _XWAYLAND_GLOBAL_OUTPUT_SCALE 24c -set _XWAYLAND_GLOBAL_OUTPUT_SCALE 2
#exec-once = wlsunset -S 9:00 -s 19:30
exec = hyprpaper
exec-once = waybar
# exec-once = waybar -c ~/.config/waybar/bottom.jsonc

# █▀▄▀█ █▀█ █▄░█ █ ▀█▀ █▀█ █▀█
# █░▀░█ █▄█ █░▀█ █ ░█░ █▄█ █▀▄
monitor = ,1366x768@60,0x0,1

# █▀▀ █▀▀ █▄░█ █▀▀ █▀█ ▄▀█ █░░
# █▄█ ██▄ █░▀█ ██▄ █▀▄ █▀█ █▄▄
general {
    gaps_in = 5
    gaps_out = 5
    border_size = 2
    col.active_border = rgb(bac2de)
    col.inactive_border = rgb(585b70)
    no_border_on_floating = false
    layout = master # or dwindle
}

# █▀▄ █▀▀ █▀▀ █▀█ █▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█
# █▄▀ ██▄ █▄▄ █▄█ █▀▄ █▀█ ░█░ █ █▄█ █░▀█
decoration {
    # Rounded corners
    rounding = 8
    multisample_edges = true

    # Opacity
    active_opacity = 1.0
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0

    # Blur
    blur = true
    blur_size = 3
    blur_passes = 3
    blur_ignore_opacity = false   # make the blur layer ignore the opacity of the window
    blur_new_optimizations = true # further optimizations to the blur
    blur_xray = false             # if enabled, floating windows will ignore tiled windows in their blur (only available if blur_new_optimizations = true)

    # Shadow
    drop_shadow = true            # enable drop shadows on windows
    shadow_range = 4              # shadow range ("size") in layout px
    shadow_render_power = 2       # in what power to render the falloff (more power, the faster the falloff)
    shadow_ignore_window = true   # if true, the shadow will not be rendered behind the window itself, only around it
    col.shadow = 0x66000000       # shadow's color; alpha dictates shadow's opacity
    # col.shadow_inactive =       # inactive shadow color (if not set, will fall back to the col.shadow value)
    shadow_offset = 2 2           # shadow's rendering offset (vec2)
    shadow_scale = 1.0            # shadow's scale, 0.0 - 1.0

    # Dimming
    dim_inactive = false          # enables dimming of inactive windows
    dim_strength = 0.5            # how much inactive windows should be dimmed, 0.0 - 1.0
    dim_special = 0.2             # how much to dim the rest of the screen by when a special workspace is open, 0.0 - 1.0
    dim_around = 0.4              # how much the 'dimaround' window rule should dim by, 0.0 - 1.0

    # Shader
    # screen_shader =             # a path to a custom shader to be applied at the end of rendering

    blurls = gtk-layer-shell
    # blurls = waybar
    blurls = lockscreen
}

# ▄▀█ █▄░█ █ █▀▄▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█ █▀ 
# █▀█ █░▀█ █ █░▀░█ █▀█ ░█░ █ █▄█ █░▀█ ▄█ 
animations {
    enabled = true

    # Bezier curves
    bezier = overshot, 0.05, 0.9, 0.1, 1.05
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1

    animation = windows, 1, 2, overshot, slide
    animation = windowsOut, 1, 2, smoothOut, slide
    animation = windowsMove, 1, 2, default
    animation = border, 1, 10, default
    animation = fade, 1, 10, smoothIn
    animation = fadeDim, 1, 10, smoothIn
    animation = workspaces, 1, 6, default
}

# █ █▄░█ █▀█ █░█ ▀█▀
# █ █░▀█ █▀▀ █▄█ ░█░
input {
    kb_model = pc104alt               # appropriate XKB keymap parameter (see /usr/share/X11/xkb/rules/base.lst)
    kb_layout = us,ru,ua              # appropriate XKB keymap parameter
    # kb_variant =                    # appropriate XKB keymap parameter
    kb_options = grp:alt_shift_toggle # appropriate XKB keymap parameter
    # kb_rules =                      # appropriate XKB keymap parameter
    # kb_file =                       # we can use a path to a custom .xkb file
    numlock_by_default = false        # engage numlock by default
    repeat_rate = 25                  # the repeat rate for held-down keys, in repeats per second
    repeat_delay = 600                # delay before a held-down key is repeated, in milliseconds
    sensitivity = 0                   # sets the mouse input sensitivity, values: -1.0 - 1.0, 0 means no modification. 
    # accel_profile =                 # sets the cursor acceleration profle; can be one of 'adaptive', 'flat' or empty to use libinput's default mode for the input device
    # force_no_accel = false          # force no cursor acceleration (not recommended)
    # left_handed = false             # switches RMB and LMB
    # scroll_method =                 # sets the scrol method; can be one of '2fg' ("2 fingers"), 'edge', 'on_button_down', 'no_scroll'
    # scroll_button = 0               # sets the scroll button; has to be an int, cannot be a string; 0 means default
    # natural_scroll = false          # inverts scrolling direction
    follow_mouse = 0                  # (0/1/2/3) specify if and how cursor movement should affect windows focus (0 - focus is independent from the cursor)
    # float_switch_override_focus = 1 # if enabled (1 or 2), focus will change to the windows under the cursor when changing from tiled-to-float and vice verse; if 2 focus wil also follow mouse on float-to-float switches

    # Touchpad
    touchpad {
        disable_while_typing = true     # disable the touchpad while typing
        natural_scroll = false          # inverts scrolling direction
        scroll_factor = 1.0             # multiplier applied to the amount of scroll movement
        middle_button_emulation = false # sending LMB and RMB simultaneously will be interpreted as a middle click
        clickfinger_behavior = false    # button presses with 1, 2, or 3 fingers will be mapped to LMB, RMB, and MMB respectively
        tap-to-click = true             # tapping on the touchpad with 1, 2, or 3 fingers will send LMB, RMB, and MMB respectively
        drag_lock = false               # when enabled, lifting the finger off for a short time while dragging will not drop the dragged item
    }

    touchdevice {
        output =      # the output to bind touch devices; empty means unset and will use the current / autodetected
        transform = 0 # transform the input from touchdevices; the possible transformations are the same as those of the monitors
    }
}

device:at-translated-set-2-keyboard {
    kb_layout = us,ru,ua
}

# █▀▄▀█ █ █▀ █▀▀
# █░▀░█ █ ▄█ █▄▄
misc {
    disable_hyprland_logo = true     # disables the hyprland logo background
    disable_splash_rendering = true  # disables the hyprland splash rendering (requires a monitor reload to take effect)
    no_vfr = false                   # disables/enables VFR (variable frame rate) - VFR increases battery life at the expense of possible issues on a few monitors
    mouse_move_enables_dpms = true   # if DPMS is set to off, wake up the monitors if the mouse moves
    always_follow_on_dnd = true      # makes mouse focus follow the mouse when drag & dropping; recommended to leave it enabled (especially when follow_mouse = 0)
    layers_hog_keyboard_focus = true # if true, makes keybard-interactive layers keep their focus on mouse move (e.g. wofi, bemenu)
    animate_manual_resizes = false   # enable animation on manual windows resizes/moves
    disable_autoreload = false       # if true, the config will not reload automatically on save, and instead needs to be reloaded with 'hyprctl reload'; might save on battery
    enable_swallow = true            # enable window swallowing
    swallow_regex = ^(kitty)$        # the class regex to be used for windows that should be swallowed (usually, a terminal)
    focus_on_activate = false        # whether Hyprland should focus an app that requests to be focused (an 'active' request)
    no_direct_scanout = false        # disables direct scanout which attempts to reduce lag when there is only one fullscreen application on a screen (e.g. a game)
    # hide_cursor_on_touch = true      # hides the cursor when the last input was a touch input until a mouse input is done
}

# █░░ ▄▀█ █▄█ █▀█ █░█ ▀█▀ █▀
# █▄▄ █▀█ ░█░ █▄█ █▄█ ░█░ ▄█
master {
    special_scale_factor = 0.8 # (0.0 - 1.0) the scale of the special workspace windows
    new_is_master = false      # whether a newly open window should replace the master or join the slaves
    new_on_top = false         # whether a newly open window should be on the top of the stack
    no_gaps_when_only = false  # whether to apply gaps when there is only one window on a workspace, aka. smart gaps
    orientation = left         # default placement of the master area, can be left, right, top or bottom
    inherit_fullscreen = true  # whether to inherit fullscreen status when cycling/swapping to another window (e.g. monocle layout)
}

dwindle {
    pseudotile = true                    # enable pseudotiling; pseudotiled windwos retain their floating size when tiled (see keybind for enabling this below)
    col.group_border = 0x66777700        # inactive (out of focus) group border color
    col.group_border_active = 0x66ffff00 # active group border color
    force_split = 0                      # 0 -> split follows mouse, 1 -> always split to the left (new = left or top), 2 -> always split to the right (new = right or bottom)
    preserve_split = true                # if enabled, the split (side/top) will not change regardless of what happens to the container
    special_scale_factor = 0.8           # (0.0 - 1.0) -> specifies the scale factor of windows on the special workspace
    split_width_multiplier = 1.0         # specifies the auto-split width multiplier
    no_gaps_when_only = false            # whether to apply gaps when there is only one window on a workspace, aka. smart gaps
    use_active_for_splits = true         # whether to prefer the active window or the mouse position for splits
}

# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█
windowrule = float, file_progress
windowrule = float, confirm
windowrule = float, dialog
windowrule = float, download
windowrule = float, notification
windowrule = float, error
windowrule = float, splash
windowrule = float, confirmreset
windowrule = float, title:Open File
windowrule = float, title:branchdialog
windowrule = float, Lxappearance
windowrule = float, Rofi
windowrule = noanim, Rofi
windowrule = float, viewnior
windowrule = float, Viewnior
windowrule = float, feh
windowrule = float, pavucontrol-qt
windowrule = float, pavucontrol
windowrule = float, file-roller
windowrule = fullscreen, wlogout
windowrule = float, title:wlogout
windowrule = fullscreen, title:wlogout
windowrule = idleinhibit focus, mpv
windowrule = idleinhibit fullscreen, firefox
windowrule = float, title:^(Media viewer)$
windowrule = float, title:^(Volume Control)$
windowrule = float, title:^(Picture-in-Picture)$
windowrule = size 800 600, title:^(Volume Control)$
windowrule = move 75 44%, title:^(Volume Control)$
windowrule = opaque, ^(firefox)$
windowrule = noblur, ^(firefox)$
windowrule = opaque, ^(zathura)$
windowrule = noblur, ^(zathura)$

# █▄▀ █▀▀ █▄█ █▄▄ █ █▄░█ █▀▄ █▀
# █░█ ██▄ ░█░ █▄█ █ █░▀█ █▄▀ ▄█
# Screenshot
bind = , Print, exec, ~/.scripts/screensht full
bind = SUPERSHIFT, S, exec, ~/.scripts/screensht area

# Applications
#bind = SUPER SHIFT, X, exec, hyprpicker -a -n
bind = CTRL ALT, L, exec, swaylock
bind = SUPER, Return, exec, kitty
bind = SUPER, b, exec, firefox
#bind = SUPER, E, exec, thunar
bind = SUPER, R, exec, killall rofi || rofi -show drun 
bind = SUPER, period, exec, killall rofi || rofi -show emoji -emoji-format "{emoji}" -modi emoji
bind = SUPER, escape, exec, killall wlogout || wlogout --protocol layer-shell -b 5 -T 400 -B 400
bind = SUPER SHIFT, r, exec, killall waybar && waybar
# bind = SUPER SHIFT, r, exec, waybar -c ~/.config/waybar/bottom.jsonc

# System controls 
# Keyboard layout
bind = SHIFT, Alt_L, exec, pkill -SIGRTMIN+2 waybar
bind = ALT, Shift_L, exec, pkill -SIGRTMIN+2 waybar 
# Audio (52 - System Speakers ID, 53 - System Mic ID)
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume 52 5%+
binde = , XF86AudioLowerVolume, exec, wpctl set-volume 52 5%-
binde = CTRL, XF86Fn equal, exec, wpctl set-volume 53 5%+
binde = CTRL, XF86Fn minus, exec, wpctl set-volume 53 5%-
bind = , XF86AudioMute, exec, wpctl set-mute 52 toggle
bind = , XF86AudioMicMute, exec, wpctl set-mute 53 toggle
# Brightness
bind = , XF86MonBrightnessUp, exec, light -A 5
bind = , XF86MonBrightnessDown, exec, light -U 5

# Window management
bind = SUPER, q, killactive,
bind = SUPER SHIFT, q, exit,
bind = SUPER, f, fullscreen,
bind = SUPER, Space, togglefloating,
bind = SUPER SHIFT, p, pseudo,                    # dwindle: enable an active window's pseudotile mode
bind = SUPER SHIFT, s, togglesplit,               # dwindle
bind = SUPER SHIFT, m, layoutmsg, swapwithmaster, # master: swaps the current window with master

# Focus
bind = SUPER, up, movefocus, u
bind = SUPER, k, movefocus, u
bind = SUPER, right, movefocus, r
bind = SUPER, l, movefocus, r
bind = SUPER, down, movefocus, d
bind = SUPER, j, movefocus, d
bind = SUPER, left, movefocus, l
bind = SUPER, h, movefocus, l

# Move
bind = SUPER CTRL, up, movewindow, u
bind = SUPER CTRL, k, movewindow, u
bind = SUPER CTRL, right, movewindow, r
bind = SUPER CTRL, l, movewindow, r
bind = SUPER CTRL, down, movewindow, d
bind = SUPER CTRL, j, movewindow, d
bind = SUPER CTRL, left, movewindow, l
bind = SUPER CTRL, h, movewindow, l

# Resize
binde = SUPER SHIFT, up, resizeactive, 0 -20
binde = SUPER SHIFT, k, resizeactive, 0 -20
binde = SUPER SHIFT, right, resizeactive, 20 0
binde = SUPER SHIFT, l, resizeactive, 20 0
binde = SUPER SHIFT, down, resizeactive, 0 20
binde = SUPER SHIFT, j, resizeactive, 0 20
binde = SUPER SHIFT, left, resizeactive, -20 0
binde = SUPER SHIFT, h, resizeactive, -20 0

# Tabbed
bind= SUPER, g, togglegroup
bind= SUPER, tab, changegroupactive

# Special
# bind = SUPER, c, togglespecialworkspace
# bind = SUPERSHIFT, c, movetoworkspace, special

# Bind workspaces
# wsbind = 1, LVDS-1
# wsbind = 2, LVDS-1
# wsbind = 3, LVDS-1
# wsbind = 4, LVDS-1
# wsbind = 5, LVDS-1
# wsbind = 6, LVDS-1
# wsbind = 7, LVDS-1
# wsbind = 8, LVDS-1
# wsbind = 9, LVDS-1
# wsbind = 0, LVDS-1

# Switch workspaces
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10
bind = SUPER ALT, up, workspace, e+1
bind = SUPER ALT, l, workspace, e+1
bind = SUPER ALT, h, workspace, e-1

# Move to a workspace
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

# Mouse
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up, workspace, e-1
